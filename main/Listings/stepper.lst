C51 COMPILER V9.60.0.0   STEPPER                                                           04/18/2020 22:51:22 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE STEPPER
OBJECT MODULE PLACED IN .\Objects\stepper.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE stepper.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\s
                    -tepper.lst) TABS(2) OBJECT(.\Objects\stepper.obj)

line level    source

   1          #include <c8051f020.h>
   2          #include <DIO.h>
   3          
   4          signed char i;
   5          unsigned char rot_angle[] = {0x06,0x03,0x09,0x0C};
   6          
   7          void motor_init(unsigned char portname , unsigned char setPosition)
   8          {
   9   1        if (setPosition == 0 )
  10   1        {
  11   2        DIO_setPin_OutPutMode(portname,0,1);
  12   2        DIO_setPin_OutPutMode(portname,1,1);
  13   2        DIO_setPin_OutPutMode(portname,2,1);
  14   2        DIO_setPin_OutPutMode(portname,3,1);
  15   2        }
  16   1        else
  17   1        {
  18   2        DIO_setPin_OutPutMode(portname,4,1);
  19   2        DIO_setPin_OutPutMode(portname,5,1);
  20   2        DIO_setPin_OutPutMode(portname,6,1);
  21   2        DIO_setPin_OutPutMode(portname,7,1);
  22   2        }
  23   1      }
  24          
  25          void motor_rotate(unsigned char portname , unsigned char setPosition,unsigned char direction)
  26            {
  27   1          if(setPosition==0)
  28   1          {
  29   2            if(direction ==0)
  30   2              {
  31   3                for(i = 0; i<4; i++)
  32   3                {
  33   4                write_low_nibble(portname,rot_angle[i]);
  34   4                delay_ms(500);
  35   4                }
  36   3            }
  37   2            else
  38   2            {
  39   3              for(i = 3; i>=0;i--)
  40   3              {
  41   4              write_low_nibble(portname,rot_angle[i]);
  42   4              delay_ms(500);
  43   4              }
  44   3            }
  45   2          }
  46   1          else
  47   1          {
  48   2            if(direction ==0)
  49   2            {
  50   3              for(i = 0; i<4; i++)
  51   3              {
  52   4              write_high_nibble(portname,rot_angle[i]);
  53   4              delay_ms(500);
  54   4              }
C51 COMPILER V9.60.0.0   STEPPER                                                           04/18/2020 22:51:22 PAGE 2   

  55   3            }
  56   2            else
  57   2            {
  58   3              for(i = 3; i>=0;i--)
  59   3              {
  60   4              write_high_nibble(portname,rot_angle[i]);
  61   4              delay_ms(500);
  62   4              }
  63   3            }
  64   2          }
  65   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    249    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
